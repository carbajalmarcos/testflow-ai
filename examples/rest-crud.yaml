# REST CRUD â€” Create, read, update, verify a todo item.

name: Todo REST CRUD
description: Full lifecycle test for a REST todo resource
tags:
  - todos
  - crud
  - smoke

steps:
  - name: Create todo
    request:
      method: POST
      url: "{api}/todos"
      headers:
        Content-Type: application/json
      body:
        title: "Write unit tests"
        completed: false
    capture:
      - name: todoId
        path: data.id
      - name: todoTitle
        path: data.title
    assertions:
      - path: status
        operator: equals
        value: 201
      - path: data.title
        operator: equals
        value: "Write unit tests"
      - path: data.id
        operator: exists

  - name: Read todo
    request:
      method: GET
      url: "{api}/todos/${todoId}"
    assertions:
      - path: status
        operator: equals
        value: 200
      - path: data.id
        operator: equals
        value: "${todoId}"
      - path: data.title
        operator: equals
        value: "${todoTitle}"

  - name: Update todo
    request:
      method: PUT
      url: "{api}/todos/${todoId}"
      headers:
        Content-Type: application/json
      body:
        title: "Write unit tests (done)"
        completed: true
    assertions:
      - path: status
        operator: equals
        value: 200
      - path: data.title
        operator: equals
        value: "Write unit tests (done)"

  - name: Verify update
    request:
      method: GET
      url: "{api}/todos/${todoId}"
    assertions:
      - path: data.title
        operator: equals
        value: "Write unit tests (done)"
      - path: data.completed
        operator: equals
        value: true
